# Day 18-领地管理 测试清单

## 📋 快速测试清单

### ✅ 测试前准备

- [ ] 确保数据库中有领地数据（至少 1 条）
- [ ] 确保已登录账号
- [ ] 确保网络连接正常

---

## 🧪 测试 1: 领地列表页

### 操作步骤
1. 启动 App
2. 切换到"领地" Tab
3. 等待 2-3 秒加载

### 检查项

| 检查项 | 状态 | 备注 |
|--------|------|------|
| 显示统计头部 | ☐ ✅ ☐ ❌ |  |
| 显示"领地数量" | ☐ ✅ ☐ ❌ |  |
| 显示"总面积" | ☐ ✅ ☐ ❌ |  |
| 显示领地卡片列表 | ☐ ✅ ☐ ❌ |  |
| 卡片显示领地名称 | ☐ ✅ ☐ ❌ | 或"未命名领地" |
| 卡片显示面积 | ☐ ✅ ☐ ❌ |  |
| 卡片显示点数 | ☐ ✅ ☐ ❌ |  |
| 卡片显示创建时间 | ☐ ✅ ☐ ❌ |  |
| 控制台无错误 | ☐ ✅ ☐ ❌ |  |

### 测试结果
☐ **通过** - 所有检查项为 ✅
☐ **失败** - 有检查项为 ❌

---

## 🧪 测试 2: 空状态

### 操作步骤
1. 如果有领地，先全部删除
2. 重新进入"领地" Tab

### 检查项

| 检查项 | 状态 | 备注 |
|--------|------|------|
| 显示"还没有领地" | ☐ ✅ ☐ ❌ |  |
| 显示提示文字 | ☐ ✅ ☐ ❌ | "前往地图页面开始圈地吧！" |
| 显示旗帜图标 | ☐ ✅ ☐ ❌ |  |

### 测试结果
☐ **通过** - 所有检查项为 ✅
☐ **失败** - 有检查项为 ❌

---

## 🧪 测试 3: 下拉刷新

### 操作步骤
1. 在领地列表页下拉
2. 等待刷新完成

### 检查项

| 检查项 | 状态 | 备注 |
|--------|------|------|
| 显示刷新指示器 | ☐ ✅ ☐ ❌ |  |
| 刷新成功 | ☐ ✅ ☐ ❌ |  |
| 领地列表更新 | ☐ ✅ ☐ ❌ |  |
| 统计信息更新 | ☐ ✅ ☐ ❌ |  |

### 测试结果
☐ **通过** - 所有检查项为 ✅
☐ **失败** - 有检查项为 ❌

---

## 🧪 测试 4: 领地详情页

### 操作步骤
1. 在领地列表中点击一个领地
2. 详情页弹出

### 检查项

| 检查项 | 状态 | 备注 |
|--------|------|------|
| Sheet 弹出 | ☐ ✅ ☐ ❌ |  |
| 显示地图预览 | ☐ ✅ ☐ ❌ |  |
| 地图上显示绿色多边形 | ☐ ✅ ☐ ❌ |  |
| 显示面积信息 | ☐ ✅ ☐ ❌ |  |
| 显示坐标点数 | ☐ ✅ ☐ ❌ |  |
| 显示创建时间 | ☐ ✅ ☐ ❌ |  |
| 显示状态（活跃） | ☐ ✅ ☐ ❌ |  |
| 显示领地 ID | ☐ ✅ ☐ ❌ |  |
| 显示 3 个未来功能 | ☐ ✅ ☐ ❌ | 重命名、建筑、交易 |
| 显示删除按钮 | ☐ ✅ ☐ ❌ |  |
| 点击"关闭"可关闭详情页 | ☐ ✅ ☐ ❌ |  |

### 测试结果
☐ **通过** - 所有检查项为 ✅
☐ **失败** - 有检查项为 ❌

---

## 🧪 测试 5: 删除领地

### 操作步骤
1. 在详情页点击"删除领地"
2. 确认 Alert 弹出
3. 点击"删除"

### 检查项

| 检查项 | 状态 | 备注 |
|--------|------|------|
| Alert 弹出 | ☐ ✅ ☐ ❌ |  |
| Alert 标题为"确认删除" | ☐ ✅ ☐ ❌ |  |
| Alert 有"取消"按钮 | ☐ ✅ ☐ ❌ |  |
| Alert 有"删除"按钮（红色） | ☐ ✅ ☐ ❌ |  |
| 点击"取消"不删除 | ☐ ✅ ☐ ❌ |  |
| 点击"删除"按钮变为"删除中..." | ☐ ✅ ☐ ❌ |  |
| 删除成功后详情页关闭 | ☐ ✅ ☐ ❌ |  |
| 列表页自动刷新 | ☐ ✅ ☐ ❌ |  |
| 删除的领地从列表消失 | ☐ ✅ ☐ ❌ |  |
| 统计信息更新 | ☐ ✅ ☐ ❌ | 领地数量 -1 |
| 控制台显示删除成功日志 | ☐ ✅ ☐ ❌ |  |

### 测试结果
☐ **通过** - 所有检查项为 ✅
☐ **失败** - 有检查项为 ❌

---

## 🧪 测试 6: 未来功能占位

### 操作步骤
1. 在详情页查看"更多功能"区域

### 检查项

| 检查项 | 状态 | 备注 |
|--------|------|------|
| 显示"重命名领地" | ☐ ✅ ☐ ❌ |  |
| 显示"建筑系统" | ☐ ✅ ☐ ❌ |  |
| 显示"领地交易" | ☐ ✅ ☐ ❌ |  |
| 每个功能显示"敬请期待" | ☐ ✅ ☐ ❌ |  |
| 每个功能有对应图标 | ☐ ✅ ☐ ❌ |  |

### 测试结果
☐ **通过** - 所有检查项为 ✅
☐ **失败** - 有检查项为 ❌

---

## 📊 总结

### 测试通过情况

| 测试项 | 结果 | 备注 |
|--------|------|------|
| 测试 1: 领地列表页 | ☐ ✅ ☐ ❌ |  |
| 测试 2: 空状态 | ☐ ✅ ☐ ❌ |  |
| 测试 3: 下拉刷新 | ☐ ✅ ☐ ❌ |  |
| 测试 4: 领地详情页 | ☐ ✅ ☐ ❌ |  |
| 测试 5: 删除领地 | ☐ ✅ ☐ ❌ |  |
| 测试 6: 未来功能占位 | ☐ ✅ ☐ ❌ |  |

### 整体结论

☐ **全部通过** - Day 18-领地管理 功能完全正常
☐ **部分通过** - 有部分功能需要修复
☐ **测试失败** - 主要功能不正常

---

## 🐛 问题记录

### 问题 1

**问题描述**:
```


```

**重现步骤**:
1.
2.
3.

**错误日志**:
```


```

---

### 问题 2

**问题描述**:
```


```

**重现步骤**:
1.
2.
3.

**错误日志**:
```


```

---

## 📝 备注

**测试完成时间**: ________
**测试人员**: ________

**额外发现**:
```


```

---

## ✅ 快速验证命令

如果想验证数据库中的领地数据，可以在 Supabase SQL Editor 执行：

```sql
-- 查看我的领地
SELECT
    id,
    name,
    area,
    point_count,
    created_at
FROM territories
WHERE user_id = 'YOUR_USER_ID'
  AND is_active = true
ORDER BY created_at DESC;

-- 查看领地总数和总面积
SELECT
    COUNT(*) as territory_count,
    SUM(area) as total_area
FROM territories
WHERE user_id = 'YOUR_USER_ID'
  AND is_active = true;
```

---

**祝测试顺利！** 🎉
